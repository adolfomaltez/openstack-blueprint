Comandos para la creacion de redes:



# create bridges, they represent the virtual switches
ovs-vsctl add-br br-admin
ovs-vsctl add-br br-tenant
ovs-vsctl add-br br-storage

# Creacion de interfaces veth
# create and configure the first admin interface (netadmin)
ip link add dev admin-sw type veth peer name admin
ip link set admin-sw up
ip link set admin up

# create and configure the first tenant interface (nettenant)
ip link add dev tenant-sw type veth peer name tenant
ip link set tenant-sw up
ip link set tenant up

# create and configure the first storage interface (netstorage)
ip link add dev storage-sw type veth peer name storage
ip link set storage-sw up
ip link set storage up


# plugin the simulated interfaces to the bridges
ovs-vsctl add-port br-admin admin-sw
ovs-vsctl add-port br-tenant tenant-sw
ovs-vsctl add-port br-storage storage-sw


## Creando tuneles VxLAN entre switches virtuales

# nodo01
ovs-vsctl add-port br-admin vxlan-admin -- set interface vxlan-admin type=vxlan options:remote_ip=10.10.20.50 options:key=5000
ovs-vsctl add-port br-tenant vxlan-tenant -- set interface vxlan-tenant type=vxlan options:remote_ip=10.10.20.50 options:key=6000
ovs-vsctl add-port br-storage vxlan-storage -- set interface vxlan-storage type=vxlan options:remote_ip=10.10.20.50 options:key=7000

# nodo02
ovs-vsctl add-port br-admin vxlan-admin -- set interface vxlan-admin type=vxlan options:remote_ip=10.10.20.40 options:key=5000
ovs-vsctl add-port br-tenant vxlan-tenant -- set interface vxlan-tenant type=vxlan options:remote_ip=10.10.20.40 options:key=6000
ovs-vsctl add-port br-storage vxlan-storage -- set interface vxlan-storage type=vxlan options:remote_ip=10.10.20.40 options:key=7000




## vagrant up


## Agregar bridges vbox a bridges con VxLAN

ovs-vsctl add-port br-admin vboxnet0
ovs-vsctl add-port br-tenant vboxnet1
ovs-vsctl add-port br-storage vboxnet2

